<app-autocomplete-field
  placeholder="Rechercher un passager par son nom, prénom..."
  [emptyValue]="regularEmptyValue"
  [minSearchTermLength]="3"
  [toSearchTerm]="toSearchTerm"
  [toTrackBy]="toTrackBy"
  [query$]="query$"
  [formGroup]="searchFormGroup"
  [validator]="regularValuesValidator"
  [revalidate]="{ status: regularFieldControl.statusChanges | async, touched: regularFieldControl.touched }"
  [prefilled]="prefilled"
  [setDefaultSelectedValue]="defaultValue"
  (selectedValue)="onSelectedValueChange($event)">
  <ng-template #resultTemplate let-templatedValue>
    <b>{{ templatedValue.lastname }} {{ templatedValue.firstname }}</b>
    <br />
    <ng-container *ngIf="templatedValue.phones?.length > 0">
      <small>
        Tèl {{ templatedValue.phones && templatedValue.phones[0].phoneType }}:
        {{ templatedValue.phones && templatedValue.phones[0].phoneNumber }}
      </small>
    </ng-container>
    <ng-container *ngIf="templatedValue.phones?.length === 0"><small>Pas de téléphone enregistré</small></ng-container>
    <br />
    <ng-container *ngIf="templatedValue.homeAddress">
      <small>Domicile: {{ templatedValue.homeAddress.context }}</small>
    </ng-container>
    <ng-container *ngIf="templatedValue.homeAddress === undefined"><small>Pas de domicile enregistré</small></ng-container>
  </ng-template>
  <ng-template #selectedValueTemplate let-selectedValue>
    <ng-container *ngIf="selectedValue.id === ''"><small>Pas de passager sélectionné</small></ng-container>
    <ng-container *ngIf="selectedValue.id !== ''">
      <small>Passager: {{ selectedValue.civility }} {{ selectedValue.lastname }} {{ selectedValue.firstname }}</small>
    </ng-container>
  </ng-template>
</app-autocomplete-field>
